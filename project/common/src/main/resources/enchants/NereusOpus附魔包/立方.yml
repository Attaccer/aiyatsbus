basic:
  id: blast_mining
  name: 立方
  max_level: 2

rarity: 稀有

targets:
  - 镐

limitations: [ ]
#  - "CONFLICT_ENCHANT:穿凿"
#  - "CONFLICT_ENCHANT:脉络"

alternative:
  grindstoneable: true

display:
  description:
    general: "每次可以挖掘立方范围的方块"
    specific: "§7每次可以挖掘§a{X轴上范围}*{Y轴上范围}*{Z轴上范围}§7范围的方块"

variables:
  flexible:
    临时X: "int::0"
    临时Y: "int::0"
    临时Z: "int::0"
    破坏位置: "string::init"
    临时位置: "location::位置=world,0,0,0"
    临时方块: "block::方块=world,0,0,0"
    是否在黑名单: "boolean::false"
    没通过硬度检测: "boolean::false"
  leveled:
    X轴上范围: "格:{level}+1"
    Y轴上范围: "格:{level}+1"
    Z轴上范围: "格:{level}+1"
  ordinary:
    速度: 12
    下蹲时不触发: true
    硬度检测: BEDROCK,OBSIDIAN
    黑名单: SKELETON_SKULL,WITHER_SKELETON_SKULL,CREEPER_HEAD,CREEPER_WALL_HEAD,PIGLIN_HEAD,PIGLIN_WALL_HEAD,PLAYER_HEAD,PLAYER_WALL_HEAD,ZOMBIE_HEAD,ZOMBIE_WALL_HEAD

mechanisms:
  listeners:
    break:
      type: BREAK
      chains:
        - "赋值::临时X:-{X轴上范围}+1"
        - "赋值::临时Y:-{Y轴上范围}+1"
        - "赋值::临时Z:-{Z轴上范围}+1"
        - "条件::{破坏者.在下蹲}:7"
        - "条件::{下蹲时不触发}:7"
        - "终止"
        - "条件::{临时X}<{X轴上范围}:31"
        - "赋值::临时Y:-{Y轴上范围}+1"
        - "条件::{临时Y}<{Y轴上范围}:29"
        - "赋值::临时Z:-{Z轴上范围}+1"
        - "条件::{临时Z}<{Z轴上范围}:27"
        - "赋值::临时位置:{方块.位置.克隆}"
        - "对象::临时位置:加:{临时X}:{临时Y}:{临时Z}"
        - "赋值::是否在黑名单:{黑名单}.分割包含:,:{方块.类型}"
        - "条件::{是否在黑名单}==true:18"
        - "赋值::临时Z:{临时Z}+1"
        - "跳转::10"
        - "赋值::没通过硬度检测:{硬度检测.分割包含(,;{方块.类型})}"
        - "条件::{临时位置.方块.类型}==AIR||{没通过硬度检测}==true:22"
        - "赋值::临时Z:{临时Z}+1"
        - "跳转::10"
        - "条件::{破坏位置}==init:24"
        - "赋值::破坏位置:{破坏者.所处世界},{临时X},{临时Y},{临时Z}"
        - "赋值::破坏位置:{破坏位置}~{破坏者.所处世界},{临时X},{临时Y},{临时Z}"
        - "赋值::临时Z:{临时Z}+1"
        - "跳转::11"
        - "赋值::临时Y:{临时Y}+1"
        - "跳转::9"
        - "赋值::临时X:{临时X}+1"
        - "跳转::7"
        - "操作::fastMultiBreak:{破坏位置}:~:{速度}"